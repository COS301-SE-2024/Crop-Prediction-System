<template>
	<Card v-if="activeIndex === 0" class="mt-6 p-5">
		<template #content>
			<div class="w-full flex flex-col justify-between items-start gap-4">
				<h1 class="text-2xl font-semibold">Field Dashboard Help</h1>
				<p>
					Welcome to the Field Dashboard! This dashboard allows you to monitor and analyze your fields using interactive
					maps and charts. Here's how to use it:
				</p>

				<h2 class="text-xl font-semibold">1. Selecting a Field</h2>
				<p>
					Use the dropdown at the top of the <strong>FieldCard</strong> to select the field you're interested in. The
					dashboard will update automatically to display data related to the selected field.
				</p>
				<Dropdown
					v-model="activeField"
					:options="fields"
					optionLabel="field_name"
					placeholder="Select a Field"
					class="w-full md:w-64"
				/>

				<h2 class="text-xl font-semibold">2. Field Information</h2>
				<p>
					After selecting a field, the <strong>FieldCard</strong> displays key information about the field, including:
				</p>
				<ul class="list-disc ml-6">
					<li><strong>Crop Type:</strong> The type of crop planted in the field.</li>
					<li><strong>Hectare:</strong> The size of the field in hectares.</li>
					<li><strong>AI Weather Summary:</strong> An overview of the field's weather conditions generated by AI.</li>
					<li><strong>Yield:</strong> The predicted tons per hectare (t/ha) and comparison with past averages.</li>
					<li><strong>Health:</strong> The health status of the field, with charts showing trends over time.</li>
					<li>
						<strong>Sprayability:</strong> Indicates how suitable the field conditions are for spraying agrochemicals.
					</li>
					<li><strong>Precipitation:</strong> Displays the current precipitation forecast for today.</li>
				</ul>

				<h2 class="text-xl font-semibold">3. Maps Interface</h2>
				<p>
					The <strong>GoogleMapsField</strong> component shows your fields on an interactive map. Fields are displayed
					with different colors:
				</p>
				<ul class="list-disc ml-6">
					<li><span class="text-green-500 font-semibold">Selected Field:</span> Highlighted in green.</li>
					<li><span class="text-purple-500 font-semibold">Unselected Fields:</span> Highlighted in purple.</li>
				</ul>
				<p>You can select a different field by clicking on it directly on the map.</p>

				<h2 class="text-xl font-semibold">4. Advanced Statistics</h2>
				<p>
					Click on the <i class="pi pi-plus mx-2" /> button labeled "More Field Stats" to open the Advanced Statistics
					panel. This panel provides additional statistics and charts about the selected field.
				</p>
				<p>You can filter the data by selecting the number of days using the <strong>SelectButton</strong>:</p>
				<SelectButton
					v-model="filter"
					:options="filterOptions"
					optionLabel="name"
					placeholder="Select Days"
					optionDisabled="constant"
				/>
				<p>Note: If a field has no data for a certain number of days, the corresponding option will be disabled.</p>

				<h2 class="text-xl font-semibold">5. Viewing Statistics</h2>
				<p>
					The Advanced Statistics panel displays several charts using the <strong>StatsCard</strong> component,
					including:
				</p>
				<ul class="list-disc ml-6">
					<li>Soil Moisture</li>
					<li>Soil Temperature</li>
					<li>Sprayability</li>
					<li>Precipitation</li>
					<li>Temperature</li>
					<li>Dew Point</li>
					<li>Humidity</li>
					<li>Pressure</li>
					<li>UV Index</li>
				</ul>
				<p>All charts are interactive and allow you to hover over data points for more details.</p>
				<StatsCard
					title="Soil Moisture"
					subtitle="The amount of water in the soil as a percentage"
					:chartData="dummyChartData.chartData"
					chartType="line"
					class="border-2 border-surface-500"
				/>
				<h2 class="text-xl font-semibold">6. Loading Indicator</h2>
				<p>
					While the field data is being fetched, a loading spinner and message will appear. Please wait until the data
					is fully loaded.
				</p>
				<div class="flex flex-col items-center justify-center gap-4 mt-4">
					<ProgressSpinner />
					<h2 class="dark:text-white font-bold">Fetching your data...</h2>
				</div>

				<h2 class="text-xl font-semibold">7. Adding Fields</h2>
				<p>
					If you have no fields available, you can start adding fields on the
					<NuxtLink to="/inputs/add-field" class="underline">Add Field Page</NuxtLink>.
				</p>
			</div>
		</template>
	</Card>
</template>

<script setup>
import { ref } from 'vue'
import { useDummyChartData } from '~/composables/useDummyChartData'
import StatsCard from '~/components/StatsCard.vue'
import ProgressSpinner from 'primevue/progressspinner'

const props = defineProps({
	activeIndex: {
		type: Number,
		default: 0,
	},
})

const activeField = ref()
const fields = ref([
	{ field_name: 'Field 1', id: 1 },
	{ field_name: 'Field 2', id: 2 },
	{ field_name: 'Field 3', id: 3 },
	{ field_name: 'Field 4', id: 4 },
	{ field_name: 'Field 5', id: 5 },
])

const filter = ref({ name: '8 Days', value: 8, constant: false })
const filterOptions = ref([
	{ name: '8 Days', value: 8, constant: false },
	{ name: ' 14 Days', value: 14, constant: false },
	{ name: '30 Days', value: 30, constant: true },
])

const { dummyChartData } = useDummyChartData()
</script>
